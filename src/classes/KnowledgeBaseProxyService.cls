//Generated by wsdl2apex

public class KnowledgeBaseProxyService 
{
	public class Result {
        public String ArticleNumber;
        public String Author;
        public String HitHighlightedSummary;
        public DateTime LastModifiedDate;
        public String Path;
        public String Title;
        private String[] ArticleNumber_type_info = new String[]{'ArticleNumber','http://www.w3.org/2001/XMLSchema','string','0','1','false'};
        private String[] Author_type_info = new String[]{'Author','http://www.w3.org/2001/XMLSchema','string','0','1','false'};
        private String[] HitHighlightedSummary_type_info = new String[]{'HitHighlightedSummary','http://www.w3.org/2001/XMLSchema','string','0','1','false'};
        private String[] LastModifiedDate_type_info = new String[]{'LastModifiedDate','http://www.w3.org/2001/XMLSchema','dateTime','1','1','false'};
        private String[] Path_type_info = new String[]{'Path','http://www.w3.org/2001/XMLSchema','string','0','1','false'};
        private String[] Title_type_info = new String[]{'Title','http://www.w3.org/2001/XMLSchema','string','0','1','false'};
        private String[] apex_schema_type_info = new String[]{'http://ucn.net/KBProxy/','true','false'};
        private String[] field_order_type_info = new String[]{'ArticleNumber','Author','HitHighlightedSummary','LastModifiedDate','Path','Title'};
    }
    public class QueryKBResponse_element {
        public KnowledgeBaseProxyService.ArrayOfResult QueryKBResult;
        private String[] QueryKBResult_type_info = new String[]{'QueryKBResult','http://ucn.net/KBProxy/','ArrayOfResult','0','1','false'};
        private String[] apex_schema_type_info = new String[]{'http://ucn.net/KBProxy/','true','false'};
        private String[] field_order_type_info = new String[]{'QueryKBResult'};
    }
    public class QueryKB_element {
        public String queryText;
        public Boolean draftArticles;
        public Boolean externalArticles;
        public Boolean internalArticles;
        private String[] queryText_type_info = new String[]{'queryText','http://www.w3.org/2001/XMLSchema','string','0','1','false'};
        private String[] draftArticles_type_info = new String[]{'draftArticles','http://www.w3.org/2001/XMLSchema','boolean','1','1','false'};
        private String[] externalArticles_type_info = new String[]{'externalArticles','http://www.w3.org/2001/XMLSchema','boolean','1','1','false'};
        private String[] internalArticles_type_info = new String[]{'internalArticles','http://www.w3.org/2001/XMLSchema','boolean','1','1','false'};
        private String[] apex_schema_type_info = new String[]{'http://ucn.net/KBProxy/','true','false'};
        private String[] field_order_type_info = new String[]{'queryText','draftArticles','externalArticles','internalArticles'};
    }
    public class KBProxySoap {
        public String endpoint_x = InContactConfiguration.SharepointEndPoint;
        public Map<String,String> inputHttpHeaders_x;
        public Map<String,String> outputHttpHeaders_x;
        public String clientCertName_x;
        public String clientCert_x;
        public String clientCertPasswd_x;
        public Integer timeout_x;
        public KnowledgeBaseProxyService.AuthHeader AuthHeader;
        private String AuthHeader_hns = 'AuthHeader=http://ucn.net/KBProxy/';
        private String[] ns_map_type_info = new String[]{'http://ucn.net/KBProxy/', 'ucnNetKbproxyDELETE'};
        public KnowledgeBaseProxyService.ArrayOfResult QueryKB(String queryText,Boolean draftArticles,Boolean externalArticles,Boolean internalArticles) {
            KnowledgeBaseProxyService.QueryKB_element request_x = new KnowledgeBaseProxyService.QueryKB_element();
            KnowledgeBaseProxyService.QueryKBResponse_element response_x;
            request_x.queryText = queryText;
            request_x.draftArticles = draftArticles;
            request_x.externalArticles = externalArticles;
            request_x.internalArticles = internalArticles;
            Map<String, KnowledgeBaseProxyService.QueryKBResponse_element> response_map_x = new Map<String, KnowledgeBaseProxyService.QueryKBResponse_element>();
            response_map_x.put('response_x', response_x);
            WebServiceCallout.invoke(
              this,
              request_x,
              response_map_x,
              new String[]{endpoint_x,
              'http://ucn.net/KBProxy/QueryKB',
              'http://ucn.net/KBProxy/',
              'QueryKB',
              'http://ucn.net/KBProxy/',
              'QueryKBResponse',
              'KnowledgeBaseProxyService.QueryKBResponse_element'}
            );
            response_x = response_map_x.get('response_x');
            return response_x.QueryKBResult;
        }
    }
    public class AuthHeader {
        public String Username;
        public String Password;
        private String[] Username_type_info = new String[]{'Username','http://www.w3.org/2001/XMLSchema','string','0','1','false'};
        private String[] Password_type_info = new String[]{'Password','http://www.w3.org/2001/XMLSchema','string','0','1','false'};
        private String[] apex_schema_type_info = new String[]{'http://ucn.net/KBProxy/','true','false'};
        private String[] field_order_type_info = new String[]{'Username','Password'};
    }
    public class ArrayOfResult {
        public KnowledgeBaseProxyService.Result[] Result;
        private String[] Result_type_info = new String[]{'Result','http://ucn.net/KBProxy/','Result','0','-1','true'};
        private String[] apex_schema_type_info = new String[]{'http://ucn.net/KBProxy/','true','false'};
        private String[] field_order_type_info = new String[]{'Result'};
    }
    
    public static List<KnowledgeBaseProxyClass> ArticleSearch(string queryText)
	{
		List<KnowledgeBaseProxyClass> results = new List<KnowledgeBaseProxyClass>();
		KnowledgeBaseProxyService.AuthHeader ah = new AuthHeader();
		ah.Username = InContactConfiguration.SharepointUserName;
		ah.Password = InContactConfiguration.SharepointPassword;
		KnowledgeBaseProxyService.KBProxySoap proxyClass = new KnowledgeBaseProxyService.KBProxySoap();
		proxyClass.timeout_x = 50000;
		proxyClass.AuthHeader = ah;
		KnowledgeBaseProxyService.ArrayOfResult serviceResponse = proxyClass.QueryKB(queryText, true, true, true);
		
		if(serviceResponse.Result != null)
		{

					for(KnowledgeBaseProxyService.Result result:serviceResponse.Result)
					{
						KnowledgeBaseProxyClass kba = new KnowledgeBaseProxyClass();
						kba.ArticleNumber = result.ArticleNumber;
						kba.Author = result.Author;
						kba.Title = result.Title;
						kba.HitHighlightedSummary = result.HitHighlightedSummary;
						kba.LastModifiedTime = result.LastModifiedDate; 
						kba.Path = result.Path;
						kba.Selected = false;
						results.add(kba);
					}

		}
		return results;
	}
}